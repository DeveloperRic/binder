<html ng-app="client" ng-controller="clientCtrl">

<head>
  <title>Binder</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://www.w3schools.com/w3css/4/w3.css" rel="stylesheet">
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
  <link href="../css/index.css" rel="stylesheet">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>

  <script src="../angular/app.client.js"></script>
  <script src="../model/app.module.user.js"></script>
</head>
<nav id="nav" class="navbar navbar-fixed-top background-accent text-color-inverse">
  <div class="nav-logoTitle">
    <span class="nav-title">Binder</span>
  </div>
  <div class="nav-buttons">
    <div class="nav-button" ng-repeat="item in navButtons">
      <a href={{item.url}} class="text-color-inverse">{{item.text}}</a>
    </div>
  </div>
</nav>

<body>
  <div id="welcomeStage" class="w3-container center" ng-controller="welcomeCtrl" ng-show="stage.focused">
    <div class="create-account" ng-show="!userFound">
      <h1>Hi! This is Binder!</h1>
      <h2>Get started by creating an account</h2>
      <form name="createAccountForm">
        <table class="center-content background-primary">
          <tr>
            <td>Email Address</td>
            <td>
              <input type="email" name="email" ng-model="email" required placeholder="email@example.com" />
            </td>
          </tr>
          <tr>
            <td>Password</td>
            <td>
              <input type="password" name="password" ng-model="password" required />
            </td>
          </tr>
          <tr>
            <td>Confirm password</td>
            <td>
              <input type="password" name="passwordconfirm" ng-model="passwordconfirm" required />
            </td>
          </tr>
          <tr class="center-content">
            <td>
              <div class="error" ng-show="error.exists">{{error.message}}</div>
            </td>
          </tr>
          <tr class="center-content">
            <td>
              <button type="submit" class="btn create-account-submit text-color-inverse background-accent" ng-click="createAccount()">Create Account</button>
              or
              <button type="submit" class="btn create-account-submit text-color-inverse background-accent" ng-click="login()">Login</button>
            </td>
          </tr>
        </table>
      </form>
    </div>
  </div>
  <div id="loginStage" class="w3-container center" ng-controller="loginCtrl" ng-show="stage.focused">
    <div class="login-stage background-accent drop-shadow text-color-inverse">
      <button class="btn return text-color-primary background-primary" ng-show="canReturn" ng-click="return()">
        <i class="material-icons">arrow_back</i>
      </button>
      <form name="loginForm">
        <table class="center-content text-color-inverse">
          <tr>
            <td>Email Address</td>
            <td>
              <input type="email" name="email" ng-model="email" required placeholder="email@example.com" />
            </td>
          </tr>
          <tr>
            <td>Password</td>
            <td>
              <input type="password" name="password" ng-model="password" required />
            </td>
          </tr>
          <tr class="center-content">
            <td>
              <div class="error" ng-show="error.exists">{{error.message}}</div>
            </td>
          </tr>
          <tr class="center-content">
            <td>
              <button type="submit" class="btn create-account-submit text-color-primary background-primary" ng-click="login()">Login</button>
            </td>
          </tr>
        </table>
      </form>
    </div>
  </div>
  <div id="connectStage" class="w3-container center" ng-controller="connectCtrl" ng-show="stage.focused">
    <h2>Let's Connect!</h2>
    <h3>Select the cloud storage services you use</h3>
    <div>
      <button class="btn source" ng-repeat="source in sources" ng-click="onSelect(source.id)" ng-disabled="sourceConnected(source.id)"
        ng-class="{true: 'background-accent', false: 'background-secondary'}[sourceConnected(source.id)]">{{source.name}}</button>
    </div>
    <div class="redirect background-secondary" ng-show="redirectReady">
      <button class="btn background-primary" ng-click="onRedirect()">Click to sign into {{selected.name}}</button>
      <div class="redirect-response" ng-show="responseReady">
        <input type="text" name="authcode" ng-model="authcode" placeholder="Paste your code here" />
        <button class="btn background-primary" ng-click="onResponse()">Connect!</button>
      </div>
    </div>
    <button class="btn continue text-color-inverse background-accent" ng-disabled="!hasConnected()" ng-click="onContinue()">Continue to dashboard</button>
  </div>
  <div id="dashboardStage" ng-controller="dashboardCtrl" ng-show="stage.focused">
    <div class="label">
      <span class="label-text">Folders</span>
      <div class="label-floor"></div>
    </div>
    <div class="tiles">
      <div class="tile background-secondary drop-shadow-light" ng-repeat="folder in folders">
        <div class="tile-top">
          <i class="material-icons">folder</i>
        </div>
        <div class="tile-content">
          <span class="tile-text">{{folder.name}}</span>
        </div>
        <div class="tile-bottom">
          <i class="small material-icons">cloud</i>
        </div>
      </div>
    </div>
    <div class="label">
      <span class="label-text">Files</span>
      <div class="label-floor"></div>
    </div>
    <div class="tiles">
      <div class="tile background-secondary drop-shadow-light" ng-repeat="file in files">
        <div class="tile-top">
          <i class="material-icons">insert_drive_file</i>
        </div>
        <div class="tile-content">
          <span class="tile-text">{{file.name}}</span>
        </div>
        <div class="tile-bottom">
          <i class="small material-icons">cloud</i>
        </div>
      </div>
    </div>
  </div>
</body>

</html>